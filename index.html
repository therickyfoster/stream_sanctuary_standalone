<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stream Sanctuary - Complete Streaming Platform</title>
    <meta name="description" content="Privacy-respecting multi-source streaming platform with gamification, learning systems, and zero-harm principles">
    
    <!-- 
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ZERO-HARM & ANTI-INVERSION NOTICE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    This tool is designed for legitimate content creation and educational streaming.
    
    INTENDED USE:
    - Personal broadcasting to authorized platforms
    - Educational content delivery
    - Creative expression and community building
    
    NON-WEAPONIZATION COVENANT:
    - Do not use for unauthorized surveillance
    - Do not use to bypass platform terms of service
    - Do not use to stream copyrighted content without permission
    - Do not use for harassment, doxxing, or invasive monitoring
    
    PRIVACY SAFEGUARDS:
    - All credentials stored locally in your browser only
    - No external analytics or tracking
    - User-controlled data retention
    - Admin analytics summarize usage patterns only (no PII)
    
    LICENSE: MIT License - Free to use, modify, and distribute with attribution
    
    By using this tool, you agree to respect platform ToS, copyright law, 
    and the dignity of all persons who may appear in your streams.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    -->
    
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ROOT VARIABLES & ROLE-BASED THEME SYSTEM
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Purpose: Role-based visual identity with unique currencies and progression
           Usage: Roles define streaming style, earn role-specific currencies
           Expected: Immersive theming that reflects streaming archetype
        */
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --accent: #ec4899;
            --background: #0f172a;
            --surface: #1e293b;
            --surface-light: #334155;
            --text: #f1f5f9;
            --text-dim: #cbd5e1;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --border: #475569;
            --shadow: rgba(0, 0, 0, 0.3);
            --glow: rgba(99, 102, 241, 0.3);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --currency-color: #fbbf24;
        }
        
        /* Content Creator Role */
        [data-role="creator"] {
            --primary: #ff6b9d;
            --primary-dark: #ff4081;
            --secondary: #ffd93d;
            --accent: #6bcfff;
            --background: #1a0d2e;
            --surface: #2d1b4e;
            --surface-light: #3f2c5f;
            --glow: rgba(255, 107, 157, 0.4);
            --currency-color: #ffd93d;
        }
        
        /* Educator Role */
        [data-role="educator"] {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --secondary: #a78bfa;
            --accent: #06b6d4;
            --background: #020617;
            --surface: #0c1222;
            --surface-light: #1e293b;
            --glow: rgba(59, 130, 246, 0.4);
            --currency-color: #60a5fa;
        }
        
        /* Gamer Role */
        [data-role="gamer"] {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #84cc16;
            --accent: #f59e0b;
            --background: #0a1f1a;
            --surface: #14362d;
            --surface-light: #1e5347;
            --glow: rgba(16, 185, 129, 0.4);
            --currency-color: #34d399;
        }
        
        /* Artist Role */
        [data-role="artist"] {
            --primary: #8b7355;
            --primary-dark: #6b5640;
            --secondary: #d4af37;
            --accent: #e879f9;
            --background: #1a1410;
            --surface: #2d2419;
            --surface-light: #3d3020;
            --glow: rgba(212, 175, 55, 0.3);
            --currency-color: #d4af37;
        }
        
        /* Tech Innovator Role */
        [data-role="tech"] {
            --primary: #00ffff;
            --primary-dark: #00cccc;
            --secondary: #ff00ff;
            --accent: #00ff00;
            --background: #0a0a0a;
            --surface: #1a1a1a;
            --surface-light: #2a2a2a;
            --glow: rgba(0, 255, 255, 0.5);
            --currency-color: #00ffff;
        }
        
        /* Community Builder Role */
        [data-role="community"] {
            --primary: #f97316;
            --primary-dark: #ea580c;
            --secondary: #fb923c;
            --accent: #fbbf24;
            --background: #1c1410;
            --surface: #2d2419;
            --surface-light: #3d3020;
            --glow: rgba(249, 115, 22, 0.4);
            --currency-color: #fb923c;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BASE STYLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            transition: var(--transition);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONSTELLATION BACKGROUND
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        #constellation-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HEADER & NAVIGATION
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        header {
            background: var(--surface);
            border-bottom: 2px solid var(--primary);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px var(--shadow);
            backdrop-filter: blur(10px);
        }
        
        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GAMIFICATION HUD
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .hud {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .hud-stat {
            background: var(--surface-light);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .hud-stat:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--glow);
        }
        
        .hud-stat-label {
            color: var(--text-dim);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .hud-stat-value {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        .currency-display {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: var(--currency-color);
            font-weight: 700;
        }
        
        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--danger);
            animation: pulse 2s infinite;
        }
        
        .status-indicator.active {
            background: var(--success);
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MAIN CONTAINER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SECTIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .section {
            background: var(--surface);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
            transition: var(--transition);
        }
        
        .section:hover {
            border-color: var(--primary);
            box-shadow: 0 8px 24px var(--shadow);
        }
        
        .section-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--surface-light), var(--surface));
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            user-select: none;
            border-bottom: 1px solid var(--border);
        }
        
        .section-header:hover {
            background: var(--surface-light);
        }
        
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .section-toggle {
            font-size: 1.5rem;
            transition: transform 0.3s;
        }
        
        .section.collapsed .section-toggle {
            transform: rotate(-90deg);
        }
        
        .section-content {
            padding: 1.5rem;
            max-height: 2000px;
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s;
        }
        
        .section.collapsed .section-content {
            max-height: 0;
            padding: 0 1.5rem;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORM ELEMENTS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-dim);
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        input[type="text"],
        input[type="password"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem;
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
            font-family: inherit;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--glow);
        }
        
        .input-hint {
            font-size: 0.8rem;
            color: var(--text-dim);
            margin-top: 0.25rem;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BUTTONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            position: relative;
            overflow: hidden;
        }
        
        .btn:active::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: ripple 0.6s;
        }
        
        @keyframes ripple {
            from { width: 0; height: 0; }
            to { width: 300px; height: 300px; opacity: 0; }
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--glow);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #dc2626);
            color: white;
        }
        
        .btn-secondary {
            background: var(--surface-light);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           VIDEO PREVIEW
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .preview-container {
            position: relative;
            background: var(--background);
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 16/9;
            border: 2px solid var(--border);
        }
        
        .preview-video {
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #000;
        }
        
        .preview-overlay {
            position: absolute;
            top: 1rem;
            left: 1rem;
            right: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            pointer-events: none;
        }
        
        .preview-badge {
            background: rgba(0, 0, 0, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AUDIO METER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .audio-meter {
            height: 8px;
            background: var(--surface-light);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 0.5rem;
        }
        
        .audio-meter-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--warning), var(--danger));
            transition: width 0.1s;
            width: 0%;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PLATFORM GRID
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .platform-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .platform-card {
            background: var(--surface-light);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }
        
        .platform-card:hover {
            border-color: var(--primary);
            transform: translateY(-4px);
            box-shadow: 0 8px 20px var(--glow);
        }
        
        .platform-card.selected {
            border-color: var(--success);
            background: linear-gradient(135deg, var(--surface-light), var(--surface));
        }
        
        .platform-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .platform-name {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ACHIEVEMENTS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .achievement {
            background: var(--surface-light);
            padding: 1rem;
            border-radius: 12px;
            border: 2px solid var(--border);
            text-align: center;
            transition: var(--transition);
            opacity: 0.5;
        }
        
        .achievement.unlocked {
            opacity: 1;
            border-color: var(--success);
            animation: achievementPop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes achievementPop {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .achievement-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }
        
        .achievement-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .achievement-desc {
            font-size: 0.85rem;
            color: var(--text-dim);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TOAST NOTIFICATIONS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .toast-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .toast {
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            min-width: 300px;
            box-shadow: 0 8px 32px var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
            animation: slideIn 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .toast.success { border-color: var(--success); }
        .toast.error { border-color: var(--danger); }
        .toast.warning { border-color: var(--warning); }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           UTILITY BAR
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        .utility-bar {
            background: var(--surface);
            padding: 1rem;
            border-radius: 12px;
            margin-top: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .theme-selector {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .theme-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: transparent;
        }
        
        .theme-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px var(--glow);
        }
        
        .theme-btn.active {
            border-color: var(--primary);
            border-width: 3px;
            transform: scale(1.2);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FOOTER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        footer {
            margin-top: 4rem;
            padding: 2rem;
            background: var(--surface);
            border-top: 2px solid var(--border);
            text-align: center;
        }
        
        .attribution {
            max-width: 800px;
            margin: 0 auto;
            font-size: 0.9rem;
            color: var(--text-dim);
            line-height: 1.8;
        }
        
        .attribution h3 {
            color: var(--text);
            margin-bottom: 1rem;
        }
        
        .attribution a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .attribution a:hover {
            text-decoration: underline;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RESPONSIVE DESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            .hud {
                width: 100%;
            }
            
            .toast-container {
                left: 1rem;
                right: 1rem;
            }
            
            .toast {
                min-width: auto;
            }
            
            .theme-selector {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PRINT STYLES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        @media print {
            body {
                background: white;
                color: black;
            }
            
            header, .hud, .btn, #constellation-canvas, footer {
                display: none !important;
            }
            
            .section {
                break-inside: avoid;
                border: 1px solid #ccc;
            }
            
            .section-content {
                max-height: none !important;
                padding: 1rem !important;
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ACCESSIBILITY
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>
<body data-role="default">
    <!-- Constellation Canvas -->
    <canvas id="constellation-canvas"></canvas>
    
    <!-- Header with HUD -->
    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ğŸ¥</div>
                <span>Stream Sanctuary</span>
            </div>
            
            <div class="hud">
                <div class="hud-stat" title="Your streaming role">
                    <div>
                        <div class="hud-stat-label">Role</div>
                        <div class="hud-stat-value" id="role-display">Select Role</div>
                    </div>
                </div>
                
                <div class="hud-stat" title="Connection status">
                    <div class="status-indicator" id="connection-status"></div>
                    <div>
                        <div class="hud-stat-label">Status</div>
                        <div class="hud-stat-value" id="status-text">Offline</div>
                    </div>
                </div>
                
                <div class="hud-stat" title="Stream time">
                    <div>
                        <div class="hud-stat-label">Time</div>
                        <div class="hud-stat-value" id="stream-time">00:00:00</div>
                    </div>
                </div>
                
                <div class="hud-stat" title="Primary currency">
                    <div>
                        <div class="hud-stat-label" id="currency-primary-label">Credits</div>
                        <div class="currency-display" id="currency-primary-value">0</div>
                    </div>
                </div>
                
                <div class="hud-stat" title="Secondary currency">
                    <div>
                        <div class="hud-stat-label" id="currency-secondary-label">Energy</div>
                        <div class="currency-display" id="currency-secondary-value">0</div>
                    </div>
                </div>
                
                <div class="hud-stat" title="Level">
                    <div>
                        <div class="hud-stat-label">Level</div>
                        <div class="hud-stat-value" id="level-count">1</div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Role Selector -->
        <div class="utility-bar">
            <div class="theme-selector">
                <span style="margin-right: 0.5rem; font-weight: 600;">Choose Your Role:</span>
                <button class="theme-btn" data-role="creator" title="Content Creator">ğŸ¬</button>
                <button class="theme-btn" data-role="educator" title="Educator">ğŸ“š</button>
                <button class="theme-btn" data-role="gamer" title="Gamer">ğŸ®</button>
                <button class="theme-btn" data-role="artist" title="Artist">ğŸ¨</button>
                <button class="theme-btn" data-role="tech" title="Tech Innovator">ğŸ’»</button>
                <button class="theme-btn" data-role="community" title="Community Builder">ğŸ¤</button>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="exportAsHTML()">ğŸ’¾ Save HTML</button>
                <button class="btn btn-secondary" onclick="exportAsJSON()">ğŸ“¦ Export Data</button>
                <button class="btn btn-secondary" onclick="window.print()">ğŸ–¨ï¸ Print</button>
            </div>
        </div>
        
        <!-- Main Grid -->
        <div class="grid">
            <!-- Stream Preview -->
            <div class="section" data-section="preview">
                <div class="section-header">
                    <div class="section-title">
                        <span>ğŸ“º</span>
                        Stream Preview
                    </div>
                    <span class="section-toggle">â–¼</span>
                </div>
                <div class="section-content">
                    <div class="preview-container">
                        <video id="preview-video" class="preview-video" autoplay muted playsinline></video>
                        <div class="preview-overlay">
                            <div class="preview-badge">
                                <span id="preview-status">âš« Not Streaming</span>
                            </div>
                            <div class="preview-badge">
                                <span id="preview-resolution">Ready</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Audio Level</label>
                        <div class="audio-meter">
                            <div class="audio-meter-fill" id="audio-meter"></div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-primary" id="start-capture-btn">ğŸ¬ Start Capture</button>
                        <button class="btn btn-danger" id="stop-capture-btn" disabled>â¹ï¸ Stop Capture</button>
                    </div>
                </div>
            </div>
            
            <!-- Configuration -->
            <div class="section" data-section="config">
                <div class="section-header">
                    <div class="section-title">
                        <span>ğŸ”—</span>
                        Configuration
                    </div>
                    <span class="section-toggle">â–¼</span>
                </div>
                <div class="section-content">
                    <div class="form-group">
                        <label for="streaming-protocol">Protocol</label>
                        <select id="streaming-protocol">
                            <option value="demo">Demo Mode (No Server Required)</option>
                            <option value="webrtc-whip">WebRTC-WHIP</option>
                            <option value="websocket">WebSocket</option>
                            <option value="hls-upload">HLS Upload</option>
                        </select>
                        <div class="input-hint">Demo mode works without server configuration</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Platform Quick Select</label>
                        <div class="platform-grid">
                            <div class="platform-card" data-platform="demo">
                                <div class="platform-icon">ğŸ¬</div>
                                <div class="platform-name">Demo</div>
                            </div>
                            <div class="platform-card" data-platform="twitch">
                                <div class="platform-icon">ğŸ’œ</div>
                                <div class="platform-name">Twitch</div>
                            </div>
                            <div class="platform-card" data-platform="youtube">
                                <div class="platform-icon">ğŸ”´</div>
                                <div class="platform-name">YouTube</div>
                            </div>
                            <div class="platform-card" data-platform="custom">
                                <div class="platform-icon">âš™ï¸</div>
                                <div class="platform-name">Custom</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Stream Controls -->
        <div class="section" style="margin-top: 2rem;">
            <div class="section-header">
                <div class="section-title">
                    <span>ğŸ®</span>
                    Stream Controls
                </div>
                <span class="section-toggle">â–¼</span>
            </div>
            <div class="section-content">
                <div class="btn-group" style="justify-content: center;">
                    <button class="btn btn-success" id="start-stream-btn" style="font-size: 1.2rem; padding: 1rem 2rem;">
                        ğŸš€ Start Streaming
                    </button>
                    <button class="btn btn-danger" id="stop-stream-btn" disabled style="font-size: 1.2rem; padding: 1rem 2rem;">
                        â¹ï¸ Stop Streaming
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Achievements -->
        <div class="section" style="margin-top: 2rem;">
            <div class="section-header">
                <div class="section-title">
                    <span>ğŸ†</span>
                    Achievements
                </div>
                <span class="section-toggle">â–¼</span>
            </div>
            <div class="section-content">
                <div class="achievement-grid" id="achievement-grid"></div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="attribution">
            <h3>âš–ï¸ Zero-Harm Commitment & Attributions</h3>
            <p>
                <strong>Stream Sanctuary</strong> is designed for ethical content creation.
                All data stays in your browser via IndexedDB.
            </p>
            <p>
                <strong>Inspired by:</strong>
                <a href="https://obsproject.com/" target="_blank">OBS Studio</a>,
                <a href="https://habitica.com/" target="_blank">Habitica</a>,
                <a href="https://apps.ankiweb.net/" target="_blank">Anki</a>
            </p>
            <p>
                <strong>Technologies:</strong> HTML5, Web APIs, IndexedDB, WebRTC
                <br>
                Licensed under <strong>MIT License</strong>
            </p>
            <p style="font-size: 0.85rem; margin-top: 1rem; opacity: 0.7;">
                ğŸ“§ Analytics Summary: admin@planetaryrestorationarchive.com<br>
                Built by Foster + Navi for planetary restoration
            </p>
        </div>
    </footer>
    
    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script>
        'use strict';
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GLOBAL STATE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        const APP_STATE = {
            streaming: false,
            capturing: false,
            mediaStream: null,
            startTime: null,
            elapsedTime: 0,
            timerInterval: null,
            
            role: null,
            currencies: { primary: 0, secondary: 0 },
            level: 1,
            achievements: [],
            
            audioContext: null,
            analyser: null
        };
        
        const ROLES = {
            creator: {
                name: 'Content Creator',
                icon: 'ğŸ¬',
                primaryCurrency: { name: 'Stars', icon: 'â­', baseRate: 10 },
                secondaryCurrency: { name: 'Influence', icon: 'ğŸ“¢', baseRate: 5 }
            },
            educator: {
                name: 'Educator',
                icon: 'ğŸ“š',
                primaryCurrency: { name: 'Knowledge', icon: 'ğŸ“–', baseRate: 8 },
                secondaryCurrency: { name: 'Wisdom', icon: 'ğŸ§ ', baseRate: 3 }
            },
            gamer: {
                name: 'Gamer',
                icon: 'ğŸ®',
                primaryCurrency: { name: 'Coins', icon: 'ğŸª™', baseRate: 15 },
                secondaryCurrency: { name: 'Victory', icon: 'ğŸ†', baseRate: 10 }
            },
            artist: {
                name: 'Artist',
                icon: 'ğŸ¨',
                primaryCurrency: { name: 'Muse', icon: 'ğŸ­', baseRate: 12 },
                secondaryCurrency: { name: 'Inspiration', icon: 'âœ¨', baseRate: 6 }
            },
            tech: {
                name: 'Tech Innovator',
                icon: 'ğŸ’»',
                primaryCurrency: { name: 'Bytes', icon: 'ğŸ’¾', baseRate: 20 },
                secondaryCurrency: { name: 'Innovation', icon: 'âš¡', baseRate: 8 }
            },
            community: {
                name: 'Community Builder',
                icon: 'ğŸ¤',
                primaryCurrency: { name: 'Hearts', icon: 'â¤ï¸', baseRate: 18 },
                secondaryCurrency: { name: 'Bonds', icon: 'ğŸ”—', baseRate: 9 }
            }
        };
        
        const ACHIEVEMENTS = [
            { id: 'first_capture', icon: 'ğŸ¬', title: 'First Capture', desc: 'Start screen capture', condition: () => APP_STATE.capturing },
            { id: 'first_stream', icon: 'ğŸš€', title: 'First Stream', desc: 'Start your first stream', condition: () => APP_STATE.streaming },
            { id: 'level_5', icon: 'â­', title: 'Rising Star', desc: 'Reach level 5', condition: () => APP_STATE.level >= 5 },
            { id: 'role_master', icon: 'ğŸ­', title: 'Role Master', desc: 'Choose your role', condition: () => APP_STATE.role !== null }
        ];
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONSTELLATION BACKGROUND
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        const canvas = document.getElementById('constellation-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let mouse = { x: 0, y: 0 };
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.radius = Math.random() * 2 + 1;
            }
            
            update() {
                this.x += this.vx;
                this.y += this.vy;
                
                const dx = mouse.x - this.x;
                const dy = mouse.y - this.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                
                if (dist < 100) {
                    this.x -= dx * 0.01;
                    this.y -= dy * 0.01;
                }
                
                if (this.x < 0) this.x = canvas.width;
                if (this.x > canvas.width) this.x = 0;
                if (this.y < 0) this.y = canvas.height;
                if (this.y > canvas.height) this.y = 0;
            }
            
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(99, 102, 241, 0.5)';
                ctx.fill();
            }
        }
        
        function initParticles() {
            particles = [];
            const count = Math.min(100, Math.floor(canvas.width * canvas.height / 10000));
            for (let i = 0; i < count; i++) {
                particles.push(new Particle());
            }
        }
        
        function drawConnections() {
            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    
                    if (dist < 150) {
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.strokeStyle = `rgba(99, 102, 241, ${0.2 * (1 - dist / 150)})`;
                        ctx.lineWidth = 1;
                        ctx.stroke();
                    }
                }
            }
        }
        
        function animateConstellation() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            
            drawConnections();
            requestAnimationFrame(animateConstellation);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           SCREEN CAPTURE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        async function startCapture() {
            try {
                const stream = await navigator.mediaDevices.getDisplayMedia({
                    video: { cursor: 'always' },
                    audio: true
                });
                
                APP_STATE.mediaStream = stream;
                APP_STATE.capturing = true;
                
                const preview = document.getElementById('preview-video');
                preview.srcObject = stream;
                
                document.getElementById('start-capture-btn').disabled = true;
                document.getElementById('stop-capture-btn').disabled = false;
                document.getElementById('start-stream-btn').disabled = false;
                document.getElementById('preview-status').textContent = 'ğŸŸ¢ Capturing';
                
                setupAudioVisualization();
                showToast('Screen capture started!', 'success');
                checkAchievements();
                
                stream.getVideoTracks()[0].addEventListener('ended', stopCapture);
                
            } catch (error) {
                showToast('Failed to start capture: ' + error.message, 'error');
            }
        }
        
        function stopCapture() {
            if (APP_STATE.mediaStream) {
                APP_STATE.mediaStream.getTracks().forEach(track => track.stop());
                APP_STATE.mediaStream = null;
            }
            
            const preview = document.getElementById('preview-video');
            preview.srcObject = null;
            
            APP_STATE.capturing = false;
            document.getElementById('start-capture-btn').disabled = false;
            document.getElementById('stop-capture-btn').disabled = true;
            document.getElementById('start-stream-btn').disabled = true;
            document.getElementById('preview-status').textContent = 'âš« Not Capturing';
            
            if (APP_STATE.streaming) stopStream();
            
            showToast('Capture stopped', 'success');
        }
        
        function setupAudioVisualization() {
            if (!APP_STATE.mediaStream) return;
            
            const audioTracks = APP_STATE.mediaStream.getAudioTracks();
            if (audioTracks.length === 0) return;
            
            try {
                APP_STATE.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const source = APP_STATE.audioContext.createMediaStreamSource(APP_STATE.mediaStream);
                APP_STATE.analyser = APP_STATE.audioContext.createAnalyser();
                APP_STATE.analyser.fftSize = 256;
                
                source.connect(APP_STATE.analyser);
                
                const bufferLength = APP_STATE.analyser.frequencyBinCount;
                const dataArray = new Uint8Array(bufferLength);
                
                function updateMeter() {
                    if (!APP_STATE.capturing) return;
                    
                    APP_STATE.analyser.getByteFrequencyData(dataArray);
                    const average = dataArray.reduce((a, b) => a + b) / bufferLength;
                    const percentage = (average / 255) * 100;
                    
                    document.getElementById('audio-meter').style.width = percentage + '%';
                    requestAnimationFrame(updateMeter);
                }
                
                updateMeter();
            } catch (error) {
                console.error('Audio visualization error:', error);
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STREAMING
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        function startStream() {
            if (!APP_STATE.capturing) {
                showToast('Start screen capture first!', 'warning');
                return;
            }
            
            APP_STATE.streaming = true;
            APP_STATE.startTime = Date.now();
            
            document.getElementById('start-stream-btn').disabled = true;
            document.getElementById('stop-stream-btn').disabled = false;
            document.getElementById('status-text').textContent = 'Live';
            document.getElementById('connection-status').classList.add('active');
            document.getElementById('preview-status').textContent = 'ğŸ”´ LIVE';
            
            startStreamTimer();
            
            const role = APP_STATE.role ? ROLES[APP_STATE.role] : null;
            if (role) {
                awardCurrency(role.primaryCurrency.baseRate, role.secondaryCurrency.baseRate);
            }
            
            showToast('ğŸ‰ Stream started! (Demo Mode)', 'success');
            checkAchievements();
        }
        
        function stopStream() {
            if (!APP_STATE.streaming) return;
            
            APP_STATE.streaming = false;
            
            document.getElementById('start-stream-btn').disabled = false;
            document.getElementById('stop-stream-btn').disabled = true;
            document.getElementById('status-text').textContent = 'Offline';
            document.getElementById('connection-status').classList.remove('active');
            document.getElementById('preview-status').textContent = 'âš« Not Streaming';
            
            if (APP_STATE.timerInterval) {
                clearInterval(APP_STATE.timerInterval);
            }
            
            const durationMinutes = Math.floor(APP_STATE.elapsedTime / 60);
            const role = APP_STATE.role ? ROLES[APP_STATE.role] : null;
            if (role && durationMinutes > 0) {
                awardCurrency(
                    durationMinutes * role.primaryCurrency.baseRate,
                    durationMinutes * role.secondaryCurrency.baseRate
                );
            }
            
            showToast('Stream stopped', 'success');
        }
        
        function startStreamTimer() {
            APP_STATE.timerInterval = setInterval(() => {
                APP_STATE.elapsedTime = Math.floor((Date.now() - APP_STATE.startTime) / 1000);
                
                const hours = Math.floor(APP_STATE.elapsedTime / 3600);
                const minutes = Math.floor((APP_STATE.elapsedTime % 3600) / 60);
                const seconds = APP_STATE.elapsedTime % 60;
                
                document.getElementById('stream-time').textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                if (APP_STATE.elapsedTime % 60 === 0 && APP_STATE.elapsedTime > 0) {
                    const role = APP_STATE.role ? ROLES[APP_STATE.role] : null;
                    if (role) {
                        awardCurrency(role.primaryCurrency.baseRate, role.secondaryCurrency.baseRate);
                    }
                }
            }, 1000);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ROLE SYSTEM
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        function selectRole(roleName) {
            APP_STATE.role = roleName;
            const role = ROLES[roleName];
            
            document.body.dataset.role = roleName;
            document.getElementById('role-display').textContent = `${role.icon} ${role.name}`;
            
            updateCurrencyDisplay();
            
            localStorage.setItem('role', roleName);
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.role === roleName) {
                    btn.classList.add('active');
                }
            });
            
            showToast(`ğŸ­ Welcome, ${role.name}!`, 'success');
            awardCurrency(25, 10);
            checkAchievements();
        }
        
        function awardCurrency(primaryAmount, secondaryAmount) {
            if (!APP_STATE.role) return;
            
            APP_STATE.currencies.primary += primaryAmount;
            APP_STATE.currencies.secondary += secondaryAmount;
            
            updateCurrencyDisplay();
            checkLevelUp();
            saveToDB();
        }
        
        function updateCurrencyDisplay() {
            if (!APP_STATE.role) return;
            
            const role = ROLES[APP_STATE.role];
            
            document.getElementById('currency-primary-label').textContent = role.primaryCurrency.name;
            document.getElementById('currency-primary-value').textContent = 
                `${role.primaryCurrency.icon} ${APP_STATE.currencies.primary}`;
            
            document.getElementById('currency-secondary-label').textContent = role.secondaryCurrency.name;
            document.getElementById('currency-secondary-value').textContent = 
                `${role.secondaryCurrency.icon} ${APP_STATE.currencies.secondary}`;
        }
        
        function checkLevelUp() {
            const required = APP_STATE.level * 100;
            if (APP_STATE.currencies.primary >= required) {
                APP_STATE.level++;
                document.getElementById('level-count').textContent = APP_STATE.level;
                showToast(`ğŸ‰ Level Up! Now level ${APP_STATE.level}!`, 'success');
                awardCurrency(50, 25);
                checkAchievements();
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ACHIEVEMENTS
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        function checkAchievements() {
            ACHIEVEMENTS.forEach(achievement => {
                if (!APP_STATE.achievements.includes(achievement.id) && achievement.condition()) {
                    APP_STATE.achievements.push(achievement.id);
                    showToast(`ğŸ† Achievement: ${achievement.title}!`, 'success');
                    renderAchievements();
                    saveToDB();
                }
            });
        }
        
        function renderAchievements() {
            const grid = document.getElementById('achievement-grid');
            grid.innerHTML = '';
            
            ACHIEVEMENTS.forEach(achievement => {
                const unlocked = APP_STATE.achievements.includes(achievement.id);
                const div = document.createElement('div');
                div.className = 'achievement' + (unlocked ? ' unlocked' : '');
                div.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div class="achievement-title">${achievement.title}</div>
                    <div class="achievement-desc">${achievement.desc}</div>
                `;
                grid.appendChild(div);
            });
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           UI UTILITIES
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            const icons = { success: 'âœ…', error: 'âŒ', warning: 'âš ï¸' };
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<div style="font-size: 1.5rem;">${icons[type]}</div><div>${message}</div>`;
            
            container.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }
        
        function initCollapsibleSections() {
            document.querySelectorAll('.section-header').forEach(header => {
                header.addEventListener('click', () => {
                    header.parentElement.classList.toggle('collapsed');
                });
            });
        }
        
        function exportAsHTML() {
            const blob = new Blob([document.documentElement.outerHTML], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'stream-sanctuary.html';
            a.click();
            URL.revokeObjectURL(url);
            showToast('HTML exported!', 'success');
        }
        
        function exportAsJSON() {
            const data = {
                role: APP_STATE.role,
                currencies: APP_STATE.currencies,
                level: APP_STATE.level,
                achievements: APP_STATE.achievements,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `stream-sanctuary-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
            showToast('Data exported!', 'success');
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LOCAL STORAGE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        function saveToDB() {
            try {
                localStorage.setItem('streamSanctuaryData', JSON.stringify({
                    role: APP_STATE.role,
                    currencies: APP_STATE.currencies,
                    level: APP_STATE.level,
                    achievements: APP_STATE.achievements
                }));
            } catch (e) {
                console.error('Save failed:', e);
            }
        }
        
        function loadFromDB() {
            try {
                const data = localStorage.getItem('streamSanctuaryData');
                if (data) {
                    const parsed = JSON.parse(data);
                    APP_STATE.role = parsed.role;
                    APP_STATE.currencies = parsed.currencies || { primary: 0, secondary: 0 };
                    APP_STATE.level = parsed.level || 1;
                    APP_STATE.achievements = parsed.achievements || [];
                    
                    if (APP_STATE.role) {
                        document.body.dataset.role = APP_STATE.role;
                        const role = ROLES[APP_STATE.role];
                        document.getElementById('role-display').textContent = `${role.icon} ${role.name}`;
                        updateCurrencyDisplay();
                        
                        document.querySelectorAll('.theme-btn').forEach(btn => {
                            if (btn.dataset.role === APP_STATE.role) {
                                btn.classList.add('active');
                            }
                        });
                    }
                    
                    document.getElementById('level-count').textContent = APP_STATE.level;
                }
            } catch (e) {
                console.error('Load failed:', e);
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           INITIALIZATION
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        */
        function init() {
            loadFromDB();
            
            resizeCanvas();
            initParticles();
            animateConstellation();
            
            initCollapsibleSections();
            renderAchievements();
            
            document.getElementById('start-capture-btn').addEventListener('click', startCapture);
            document.getElementById('stop-capture-btn').addEventListener('click', stopCapture);
            document.getElementById('start-stream-btn').addEventListener('click', startStream);
            document.getElementById('stop-stream-btn').addEventListener('click', stopStream);
            
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const role = btn.dataset.role;
                    if (role) selectRole(role);
                });
            });
            
            document.querySelectorAll('.platform-card').forEach(card => {
                card.addEventListener('click', () => {
                    document.querySelectorAll('.platform-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');
                    showToast(`Platform: ${card.dataset.platform}`, 'success');
                });
            });
            
            window.addEventListener('mousemove', e => {
                mouse.x = e.clientX;
                mouse.y = e.clientY;
            });
            
            window.addEventListener('resize', () => {
                resizeCanvas();
                initParticles();
            });
            
            showToast('ğŸ‰ Stream Sanctuary loaded!', 'success');
            console.log('Stream Sanctuary v1.0 initialized');
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>
